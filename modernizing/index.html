
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Summary from thinkweek for @dparnas">
      
      
        <meta name="author" content="Dagfinn Parnas">
      
      
      
        <link rel="prev" href="../multi-agent/langchain/">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>Overview - Thinkweek 2024 - @dparnas</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bcfcd587.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#step-0-code-dump" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Thinkweek 2024 - @dparnas" class="md-header__button md-logo" aria-label="Thinkweek 2024 - @dparnas" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Thinkweek 2024 - @dparnas
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Overview
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/elsewhat/thinkweek-dparnas-2024" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    elsewhat/thinkweek-dparnas-2024
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href=".." class="md-tabs__link">
          
  
  ThinkWeek

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../llm/" class="md-tabs__link">
          
  
  Open LLM models

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../multi-agent/" class="md-tabs__link">
          
  
  AI agent frameworks

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  Modernizing enterprise solutions with LLMs

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Thinkweek 2024 - @dparnas" class="md-nav__button md-logo" aria-label="Thinkweek 2024 - @dparnas" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Thinkweek 2024 - @dparnas
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/elsewhat/thinkweek-dparnas-2024" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    elsewhat/thinkweek-dparnas-2024
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ThinkWeek
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            ThinkWeek
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Summary
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../day1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Day 1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../day2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Day 2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../day3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Day 3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../day4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Day 4
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../day5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Day 5
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Open LLM models
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Open LLM models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../llm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    AI agent frameworks
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            AI agent frameworks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../multi-agent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../multi-agent/autogen/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Autogen
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../multi-agent/crewai/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    crewAI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../multi-agent/langchain/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Langchain
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Modernizing enterprise solutions with LLMs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Modernizing enterprise solutions with LLMs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Overview
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#step-0-code-dump" class="md-nav__link">
    <span class="md-ellipsis">
      Step 0 - Code dump
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-1-target-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1 - Target architecture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-code-packages" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2 - Code packages
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-contracts-for-each-bounded-context" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3 - Contracts for each bounded context
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-implementation-of-contract" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4 - Implementation of contract
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-constant-refinment-through-unit-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Step 5 - Constant refinment through unit tests
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#various-notes-for-the-experiments-related-to-this-area" class="md-nav__link">
    <span class="md-ellipsis">
      Various notes for the experiments related to this area
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#step-0-code-dump" class="md-nav__link">
    <span class="md-ellipsis">
      Step 0 - Code dump
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-1-target-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1 - Target architecture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-code-packages" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2 - Code packages
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-contracts-for-each-bounded-context" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3 - Contracts for each bounded context
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-implementation-of-contract" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4 - Implementation of contract
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-5-constant-refinment-through-unit-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Step 5 - Constant refinment through unit tests
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#various-notes-for-the-experiments-related-to-this-area" class="md-nav__link">
    <span class="md-ellipsis">
      Various notes for the experiments related to this area
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Overview</h1>

<p>The background for this thought experiment is the renewal of large enterprise solutions with outdated technology and plenty of technical debt. 
Typically, such solutions will take years to modernize with a traditional approach and have high complexity and risk. </p>
<p>I believe it's possible to use LLMs in to speed up this modernization process.</p>
<p>The key is to break it down in smaller well-defined agentic workflows with intermediate ouput in both structured and unstructred form. </p>
<p>Let's do a thought experiment to modernize an example enterprise solution with a long history. 
The business logic is primarily in PL/SQL stored procedures in Oracle. 
In addition to the stored procedures there are table triggers and scheduled jobs in the database. </p>
<p>A thick client in a legacy framework is the front-end for users and it has a very tight coupling with the database.</p>
<h2 id="step-0-code-dump">Step 0 - Code dump</h2>
<p>The initial step is to acquire a code dump of the solution. </p>
<p>This include: </p>
<ul>
<li>Table creation scripts with properties, keys and indexes</li>
<li>Trigger definition scripts for tables</li>
<li>Stored procedures code</li>
<li>Scheduled jobs code</li>
<li>Thick client code</li>
</ul>
<p>It's quite clear that LLMs cannot processed the full code dump in a zero shot prompt fashion. Gemini is the model with the largest context window of 2 million token and will not be able to fit the code. 
Even if it was able to fit the code, the LLM would not be able to keep attention on the full data. </p>
<p>It's therefore necessary to split the code dump and therefore we need to think about the target architecture.</p>
<h2 id="step-1-target-architecture">Step 1 - Target architecture</h2>
<p>The target archiecture should be based on <a href="https://learn.microsoft.com/en-us/azure/architecture/microservices/model/domain-analysis">bounded context from Domain Driven Design</a>. </p>
<p>This process will likely be mostly manual, although it's likely to get assistance based on human chat interface with LLMs. </p>
<p>Each bounded context will provide structured contracts to other bounded context and it's natural to represent these through the OpenAPI 3.1 standard (as used in REST APIs).
Therefore, it's a goal to create the OpenAPI contract through LLMs in later steps. </p>
<p>Each bounded context should be well-defined with list of business capabilities and data entities it's responsible for. This will be provided as input to models in later stages. </p>
<h2 id="step-2-code-packages">Step 2 - Code packages</h2>
<p>Within each bounded context, there must be defined code packages with smaller modules based on the code dump. 
The code package can be a combination of structured (for example in YAML or JSON format) and unstructured data (code lines). Ideally, each code package should be small (max ~64KB which is 50% of the context window of newest open models).</p>
<p>An open question is if you need additional data to perform the split of the code dump into code packages. 
Additional data may include: </p>
<ul>
<li>Log trace for executing a certain functions</li>
<li>Example data for each table</li>
</ul>
<p>Suggest that each file in the code dump has a corresponding classification file in structure format. 
LLMs can provide this classification through "tool/functions" and this was tested out in <a href="https://github.com/elsewhat/multi-agent-langgraph-experiments/blob/main/ora-stored-procedure-classification-langfuse.py">ora-stored-procedure-classification-langfuse.py</a>. Here the input was a stored procedure and the output was:</p>
<pre><code>{
    'createsData': False, 
    'selectsData': True, 
    'updatesData': True, 
    'deletesData': False, 
    'tables': 'employees, departments'
}
</code></pre>
<p>Note: belongsToBoundedContext should be added to the output as well</p>
<h2 id="step-3-contracts-for-each-bounded-context">Step 3 - Contracts for each bounded context</h2>
<p>Creating the contracts for each bounded context would be next. 
This can likely be semi-automated with LLM models based on code packages. </p>
<p>The contract provides structure and can easily be unit tested as later steps will generate code. </p>
<p><a href="https://arxiv.org/abs/2303.17651">Self-Refine: Iterative refinement with self-feedback </a> is an important research agentic pattern suitable for this steps. LangGraph provides excellent support for well-defined workflows setup as cyclic graphs.</p>
<p>To provide the feedback we should use a tool and <a href="https://github.com/stoplightio/spectral">spectral-cli</a> is perfect. With spectral it's possible to define custom ruleset in order to promote increased quality (such as requiring examples or operationId) or to ignore non essential warnings.</p>
<p><a href="https://github.com/elsewhat/multi-agent-langgraph-experiments/blob/main/ora-tables-to-openapi-component.py">ora-tables-to-openapi-component.py</a> is my experiment to verify that this approach works. 
This LangGraph node shows how this is implemented.</p>
<pre><code>def node_feedback(state: AgentState):
    # Write draft_code_block from earlier stage
    with open('gen_openapi.yaml', 'w') as file:
        file.write(state['draft_output_code_block'])


    from langchain_experimental.llm_bash.bash import BashProcess
    from langchain_community.tools import ShellTool

    shell_tool = ShellTool(ask_human_input=False)
    validationOutput = shell_tool.run({&quot;commands&quot;: [&quot;spectral lint gen_openapi.yaml&quot;]})
    return {
        &quot;feedback_output&quot;: validationOutput
    }
</code></pre>
<p>This is the agentic workflow used in the example.</p>
<p><img alt="Capture" src="img/graph_ora_tables.png" /></p>
<h2 id="step-4-implementation-of-contract">Step 4 - Implementation of contract</h2>
<p>The implementation of the API can be done by combining the API contract and the relevant code package. </p>
<p>This is a complicate step and will require many iterations on a fit for purpose agentic workflow. It will likely also require a human in the loop to constantly improve the implementation. </p>
<p>The agentic workflow suggest <a href="https://arxiv.org/abs/2401.08500">Code Generation with AlphaCodium: From Prompt Engineering to Flow Engineering</a> could be used for inspiration and it provides some interesting insights: </p>
<ul>
<li>Generating  tests is easier than generating solution code</li>
<li>YAML Structured output: the usage of structured output - asking the model to generate an output in YAML format, equivalent to a given Pydantic class - is a key component in our proposed flow</li>
<li>when asking an LLM to reason about an issue, better results are obtained when demanding the output to be in bullet points format</li>
<li>When clearly asking the model to: “divide the generated code into small sub-functions, with meaningful names and functionality”, we observe a better-produced code, with fewer bugs, and higher success rates for the iterative fixing stages</li>
</ul>
<h2 id="step-5-constant-refinment-through-unit-tests">Step 5 - Constant refinment through unit tests</h2>
<p>Once there is code which compiles and runs, the focus should be on constant refinement. </p>
<p>To provide feedback, unit test results should be key. </p>
<p>Human in the loop will likely be required.</p>
<h2 id="various-notes-for-the-experiments-related-to-this-area">Various notes for the experiments related to this area</h2>
<p>Notes:</p>
<ul>
<li>Mistral-nemo:12b model was better than llama3.1:8B for this task</li>
<li>Had to increase the context window from default 8KB to 32KB in order to avoid cut-offs (ref <a href="https://github.com/elsewhat/multi-agent-langgraph-experiments/blob/main/Modelfile_mistral_nemo_32kb_context.txt">Modelfile</a>)</li>
<li>The models (including gpt-4o-mini) had a tendency to create full OpenAPI specification with endpoints, even though the prompt was focused on only components definition</li>
<li><a href="https://smith.langchain.com/">LangSmith</a> was useful as a debugging tool to understand the graph flow. <a href="https://github.com/langfuse/langfuse">LangFuse</a> is considered more open and verified it worked just as well.</li>
<li><a href="https://github.com/chigwell/mdextractor">mdextractor</a> was used to identify code blocks in the output (though it's probably better to avoid this dependency and use their <a href="https://github.com/chigwell/mdextractor/blob/main/mdextractor/__init__.py">regexp</a> directly)</li>
<li>Node names in LangGraph cannot be the same as properties in the AgentState</li>
<li>Very easy to test different models</li>
<li>Note sure how much the plan step helped as the models are generally good a defining OpenAPI specification 0-shot</li>
<li>The bowling context of task sometimes made the model diverge to content not part of the initial Oracle table definition (might be possible to overcome by repeating the overall task context)</li>
<li>Spectral could be used to add additional custom rules to promote improve the quality and the completness of the API contract (for example to require examples)</li>
<li>Spectral warnings might have been good to remove from the output through a custom rule set.</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 Dagfin Parnas
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/dparnas" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.tabs.sticky"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
    
  </body>
</html>